CREATE DATABASE IF NOT EXISTS `srd_ims`;

use `srd_ims`;

CREATE TABLE IF NOT EXISTS `customer` (
  `CUSTOMER_ID` integer NOT NULL AUTO_INCREMENT,
  `CUSTOMER_NAME` varchar(40) NOT NULL,
  `CUSTOMER_NIF` integer NOT NULL ,
  `BIRTHDAY` date NOT NULL ,
  `EMAIL` varchar(40) NOT NULL,
  `PASS` varchar(25) NOT NULL,
  PRIMARY KEY (`CUSTOMER_ID`)
);

CREATE TABLE IF NOT EXISTS `address` (
  `ADDRESS_ID` integer NOT NULL AUTO_INCREMENT,
  `CUSTOMER_ID` integer NOT NULL,
  `ZIP_CODE` varchar(25) NOT NULL,
  `COUNTRY` varchar(25) NOT NULL,
  `CITY` varchar(25) NOT NULL,
  `STREET` varchar(25) NOT NULL,
  PRIMARY KEY (`ADDRESS_ID`),
  FOREIGN KEY (`CUSTOMER_ID`) REFERENCES customer(`CUSTOMER_ID`)
  ON UPDATE CASCADE
  ON DELETE RESTRICT
);

CREATE TABLE IF NOT EXISTS `payment` (
  `PAYMENT_ID` integer NOT NULL AUTO_INCREMENT,
  `CUSTOMER_ID` integer NOT NULL,
  `TYPE` varchar(25) NOT NULL,
  `CARD_NUMBER` bigint(255) NOT NULL,
  `CVC` integer NOT NULL,
  `Date` date NOT NULL,
  PRIMARY KEY (`PAYMENT_ID`),
  FOREIGN KEY (`CUSTOMER_ID`) REFERENCES customer(`CUSTOMER_ID`)
  ON UPDATE CASCADE
  ON DELETE RESTRICT
);

CREATE TABLE IF NOT EXISTS `date` (
  `DATE_ID` integer NOT NULL auto_increment,
  `DATE` date NOT NULL,
  `DAY` integer NOT NULL,
  `MONTH` varchar(25) NOT NULL,
  `CALENDAR_YEAR` integer NOT NULL,
  `CALENDAR_MOTH` integer NOT NULL,
  `WEEK` integer NOT NULL,
  PRIMARY KEY (`DATE_ID`)
);

CREATE TABLE IF NOT EXISTS `sales` (
  `SALES_ID` integer NOT NULL AUTO_INCREMENT,
  `CUSTOMER_ID` integer NOT NULL,
  `ADDRESS_ID` integer NOT NULL,
  `PAYMENT_ID` integer NOT NULL,
  `TOTAL_AMOUNT` decimal(6,2) NOT NULL,
  `DATE_ID` integer NOT NULL,
  `SUBTOTAL` decimal(6,2) NOT NULL,
  `TAX` decimal(6,2) NOT NULL,
  PRIMARY KEY (`SALES_ID`),
  FOREIGN KEY (`CUSTOMER_ID`) REFERENCES customer(`CUSTOMER_ID`),
  FOREIGN KEY (`ADDRESS_ID`) REFERENCES address(`ADDRESS_ID`),
  FOREIGN KEY (`PAYMENT_ID`) REFERENCES payment(`PAYMENT_ID`),
  FOREIGN KEY (`DATE_ID`) REFERENCES date(`DATE_ID`)
  ON UPDATE CASCADE
  ON DELETE RESTRICT
);

CREATE TABLE IF NOT EXISTS `products` (
  `PRODUCTS_ID` integer NOT NULL AUTO_INCREMENT,
  `PRODUCTS_NAME` varchar(40) NOT NULL,
  `PRODUCT_CATEGORY` varchar(40) NOT NULL,
  `PRODUCT_DESCRIPTION` varchar(100) NOT NULL,
  `UNIT_PRICE` decimal(6,2) NOT NULL ,
  `BRAND` varchar(15) NOT NULL,
  `COLOR` varchar(40) NOT NULL,
  `SIZE` varchar(2) NOT NULL,
  `STOCK` integer NOT NULL,
  `TAX` decimal(3,2) NOT NULL,
  PRIMARY KEY (`PRODUCTS_ID`)
);

CREATE TABLE IF NOT EXISTS `sales-products` (
  `PRODUCTS_ID` integer NOT NULL,
  `SALES_ID` integer NOT NULL,
  `QUANTITY` integer NOT NULL,
  `SUBTOTAL` decimal(6,2) NOT NULL,
  `TAX` decimal(6,2) NOT NULL,
  `TOTAL` decimal(6,2) NOT NULL,
  PRIMARY KEY (`PRODUCTS_ID`,`SALES_ID`),
  FOREIGN KEY (`PRODUCTS_ID`) REFERENCES products(`PRODUCTS_ID`),
  FOREIGN KEY (`SALES_ID`) REFERENCES sales(`SALES_ID`)
  ON UPDATE CASCADE
  ON DELETE RESTRICT
);

CREATE TABLE IF NOT EXISTS `rating` (
	`RATING_ID` integer NOT NULL AUTO_INCREMENT,
    `RATING` integer NOT NULL,
    CONSTRAINT `RATING` CHECK (`RATING` IN (1, 2, 3, 4, 5)),
    `DATE` date NOT NULL,
    `SALES_ID` integer NOT NULL,
    PRIMARY KEY (`RATING_ID`),
    FOREIGN KEY (`SALES_ID`) REFERENCES sales(`SALES_ID`)
    ON UPDATE CASCADE
    ON DELETE RESTRICT
);

INSERT INTO `customer`(`CUSTOMER_NAME`,`CUSTOMER_NIF`,`BIRTHDAY`,`EMAIL`,`PASS`) VALUES 
('Goncalo soares',313795656,'1956-09-14','4lavi.shar@gmail.com','EnXUmYW8'),
('Pedro coimbra',033455789,'1961-10-15','halaa.altaee.1026@gmail.com','PEFyvVPy'),
('Isabel silva',886973406,'1988-12-23','obryarjam@gmail.com','BqhvcLhb'),
('Miguel nascimento',762261065,'1994-05-05','dkolyo-11s@gmail.com','nDfa8dF7'),
('Rúben ribeiro',588922021,'1963-03-03','3moham@gmail.com','aCfD9aRg'),
('Renato vieira',660818951,'1971-04-03','icool.smah3@gmail.com','LzDb3XMp'),
('Bruno aleixo',399399904,'1976-07-20','wgoldenboy.rajy@gmail.com','LPaXvGdK'),
('Mário teixeira',246185194,'1976-09-15','2shaikh.goush_19m@gmail.com','Ku3mphv7'),
('Ruben matos',335824782,'1959-07-29','dhusamsalih@gmail.com','T6gYyy7Q'),
('Fernando mendes',645935454,'1960-01-02','1madykadam1@gmail.com','vvTtA75T'),
('Joaquim rascão',833862902,'1996-04-17','zelessealyahme@gmail.com','tJDkxbtq'),
('Daniel saraiva',039511624,'1999-05-25','qmr.nzakah6@gmail.com','HEeejvjA'),
('Sandro cunha',336495056,'1964-06-14','azou@gmail.com','7s6WnKe5'),
('Sara soura',276809728,'1965-04-09','9yahya_games1@gmail.com','b6sDSrrg'),
('José peseiro',055398056,'1952-11-18','dayahamza310@gmail.com','s9SM9UM7'),
('Maria leal',687516543,'1968-06-14','pabde-al@gmail.com','VYmDe7Kz'),
('Dinis lucas',670699186,'1976-01-12','bmon@gmail.com','GayKhwEq'),
('Ivo seixas',263644372,'1980-01-05','mmalek.mimi@gmail.com','aHVGKrEf'),
('Mariana santos',402255941,'1981-05-14','gnasir.yaqoo@gmail.com','8BKQZSgA'),
('Tiago miguel',940694797,'2002-01-27','gsamir203h@gmail.com','XtpeJhGr');

INSERT INTO `address` (`CUSTOMER_ID`, `COUNTRY`, `CITY`, `STREET`, `ZIP_CODE`) VALUES
(1,'Portugal','Lisboa','Rua X','9733-908'),
(2,'Portugal','Coimbra', 'DXG','5781-684'),
(3,'Portugal','Porto', 'KU','1345-462'),
(4,'Portugal','Espinho','Rua A','9668-479'),
(5,'Portugal','Seixal','Rua B','4243-064'),
(6,'Portugal','Vila do Conde','Rua C','7997-745'),
(6,'Portugal','Tarouca','Rua D','8461-454'),
(1,'Portugal','Paredes','Rua E','3071-181'),
(3,'Portugal','Oliveira do Hospital','Rua F','8845-258'),
(10,'Portugal','Gondomar','Rua G','5811-222'),
(11,'Espanha','Las Palmas','Rua H','6038-226'),
(12,'Espanha','Zaragoza','Rua I','5812-934'),
(13,'Espanha','Bilbao','Rua J','2635-305'),
(14,'Espanha','Valencia','Rua K','1407-988'),
(15,'Espanha','Madrid','Rua L','4889-280'),
(16,'Espanha','Madrid','Rua M','8708-601'),
(17,'Espanha','Madrid','Rua N','5458-686'),
(12,'Espanha','Barcelona','Rua O','7256-033'),
(19,'Espanha','Barcelona','Rua P','5505-721'),
(20,'Espanha','Seville','Rua Q','7300-895'),
(16,'Espanha','Seville','Rua R','2084-691'),
(15,'Espanha','Seville','Rua S','6636-934'),
(11,'Espanha','Seville','Rua T','4180-543'),
(12,'Espanha','Seville','Rua U','1107-075'),
(9,'Espanha','Seville','Rua Y','3472-910'),
(8,'Espanha','Seville','Rua X','2711-500'),
(18,'Portugal','Horta','Rua ZA','7459-762'),
(7,'Portugal','Horta','Rua ZE','4939-300'),
(18,'Portugal', 'Lagoa','Rua QR','5839-260'),
(3,'Portugal','Funchal','Rua TE','5337-637'),
(5,'Portugal','Funchal','Rua EDF','2051-073'),
(6,'Portugal','Funchal','Rua QYR','1904-391'),
(7,'Portugal','Lisboa','Rua XCV','9099-061'),
(2,'Portugal','Lisboa','Rua WQE','6362-256'),
(20,'Portugal','Porto','Rua UYH','1535-058');

INSERT INTO `payment`(`CUSTOMER_ID`,`TYPE`,`CARD_NUMBER`,`CVC`,`Date`) VALUES
(1,'Credit',5286804550550226,628,'2022-01-04'),
(2,'Debit',5286245576481547,205,'2021-06-21'),
(3,'Debit',5286445560141329,132,'2022-02-15'),
(4,'Credit',5286935576071865,718,'2021-02-25'),
(5,'Debit',5286945250077786,901,'2020-10-17'),
(6,'Debit',5286125516040219,614,'2020-09-19'),
(7,'Credit',5286485556271134,326,'2020-01-28'),
(8,'Debit',5286485556271134,834,'2023-01-09'),
(9,'Credit',5286855577304623,306,'2022-03-02'),
(10,'Credit',5286495546268096,426,'2022-09-09'),
(11,'Debit',5286772155023038,502,'2020-10-12'),
(12,'Credit',5286130555553005,534,'2020-08-10'),
(13,'Credit',5286338385525611,107,'2022-08-02'),
(14,'Credit',5286201352592182,721,'2022-07-02'),
(15,'Debit',5286405885564898,179,'2024-01-15'),
(16,'Credit',5286224595555526,533,'2023-11-27'),
(17,'Debit',5286798455878642,822,'2022-03-18'),
(18,'Debit',5286584212515561,990,'2023-07-04'),
(19,'Credit',5286741708552515,882,'2023-07-15'),
(20,'Credit',5286865517556801,749,'2023-01-12'),
(1,'Debit',5286126398545166,508,'2024-04-13'),
(7,'Debit',5286866764553082,889,'2021-12-09'),
(14,'Debit',5286191845557458,145,'2024-11-08'),
(16,'Credit',5286792616585410,118,'2022-07-24'),
(19,'Debit',5286983964592866,659,'2020-04-14');

INSERT INTO `date`(`DATE`,`DAY`,`MONTH`,`CALENDAR_YEAR`,`CALENDAR_MOTH`, `WEEK`) VALUES
('2019-12-01',01,'DEZ',2019,12,48),
('2019-12-02',02,'DEZ',2019,12,49),
('2019-12-03',03,'DEZ',2019,12,49),
('2019-12-04',04,'DEZ',2019,12,49),
('2019-12-05',05,'DEZ',2019,12,49),
('2019-12-06',06,'DEZ',2019,12,49),
('2019-12-07',07,'DEZ',2019,12,49),
('2019-12-08',08,'DEZ',2019,12,49),
('2019-12-09',09,'DEZ',2019,12,50),
('2019-12-10',10,'DEZ',2019,12,50),
('2019-12-11',11,'DEZ',2019,12,50),
('2019-12-12',12,'DEZ',2019,12,50),
('2019-12-13',13,'DEZ',2019,12,50),
('2019-12-14',14,'DEZ',2019,12,50),
('2019-12-15',15,'DEZ',2019,12,50),
('2019-12-16',16,'DEZ',2019,12,51),
('2019-12-17',17,'DEZ',2019,12,51),
('2019-12-18',18,'DEZ',2019,12,51),
('2019-12-19',19,'DEZ',2019,12,51),
('2019-12-20',20,'DEZ',2019,12,31),
('2019-12-21',21,'DEZ',2019,12,51),
('2019-12-22',22,'DEZ',2019,12,51),
('2019-12-23',23,'DEZ',2019,12,52),
('2019-12-24',24,'DEZ',2019,12,52),
('2019-12-25',25,'DEZ',2019,12,52),
('2019-12-26',26,'DEZ',2019,12,52),
('2019-12-27',27,'DEZ',2019,12,52),
('2019-12-28',28,'DEZ',2019,12,52),
('2019-12-29',29,'DEZ',2019,12,52),
('2019-12-30',30,'DEZ',2019,12,1),
('2019-12-31',31,'DEZ',2019,12,1),
('2020-01-01',01,'JAN',2020,01,1),
('2020-01-02',02,'JAN',2020,01,1),
('2020-01-03',03,'JAN',2020,01,1),
('2020-01-04',04,'JAN',2020,01,1),
('2020-01-05',05,'JAN',2020,01,1),
('2020-01-06',06,'JAN',2020,01,2),
('2020-01-07',07,'JAN',2020,01,2),
('2020-01-08',08,'JAN',2020,01,2),
('2020-01-09',09,'JAN',2020,01,2),
('2020-01-10',10,'JAN',2020,01,2),
('2020-01-11',11,'JAN',2020,01,2),
('2020-01-12',12,'JAN',2020,01,2),
('2020-01-13',13,'JAN',2020,01,3),
('2020-01-14',14,'JAN',2020,01,3),
('2020-01-15',15,'JAN',2020,01,3),
('2020-01-16',16,'JAN',2020,01,3),
('2020-01-17',17,'JAN',2020,01,3),
('2020-01-18',18,'JAN',2020,01,3),
('2020-01-19',19,'JAN',2020,01,3),
('2020-01-20',20,'JAN',2020,01,4),
('2020-01-21',21,'JAN',2020,01,4),
('2020-01-22',22,'JAN',2020,01,4),
('2020-01-23',23,'JAN',2020,01,4),
('2020-01-24',24,'JAN',2020,01,4),
('2020-01-25',25,'JAN',2020,01,4),
('2020-01-26',26,'JAN',2020,01,4),
('2020-01-27',27,'JAN',2020,01,5),
('2020-01-28',28,'JAN',2020,01,5),
('2020-01-29',29,'JAN',2020,01,5),
('2020-01-30',30,'JAN',2020,01,5),
('2020-01-31',31,'JAN',2020,01,5);

INSERT INTO `sales` (`CUSTOMER_ID`,`ADDRESS_ID`,`PAYMENT_ID`,`TOTAL_AMOUNT`,`DATE_ID`,`SUBTOTAL`,`TAX`) VALUES
(1,1,1,12.43,24,11.00,1.43),
(2,34,2,497.2,24,440.00,57.2),
(3,9,3,646.36,24,572.00,74.36),
(4,4,4,239.56,25,212.00,27.36),
(5,31,5,113.00,26,100.00,13.00),
(6,6,6,45.12,27,40.00,5.12),
(7,28,22,112.89,28,99.90,12.99),
(8,26,8,440.70,28,390.00,50.70),
(9,25,9,56.50,29,50.00,6.50),
(10,10,10,56.50,29,50.00,6.50),
(11,23,11,95.49,29,84.50,10.99),
(12,12,12,21.87,33,19.35,2.52),
(13,13,13,226.00,34,200.00,26.00),
(14,14,23, 146.90,36,130.00, 16.90),
(15,22,15,107.35,36,95.00,12.35),
(16,21,24,87.01,38,77.00, 10.01),
(17,17,17,646.36,39,572.00,74.36),
(18,27,18,226.00,40,200.00, 26.00),
(19,19,19,87.01,41,77.00, 10.01),
(20,35,20,311.77,42,275.9,35.87),
(16,16,16,339.00,42,300.00,39.00),
(19,19,25,53.95,44,47.74, 6.21),
(7,33,7, 96.05,46,85.00, 11.05),
(20,20,20,20.80,46,18.40,2.40),
(2,2,2,56.50,46,50.00, 6.50),
(14,14,14,158.20,48,140.00,18.20),
(9,25,9, 95.49,49,84.50,10.99),
(12,18,12, 56.50,50,50.00,6.50),
(4,4,4,87.01,50,77.00, 10.01),
(1,1,21,46.33,50,41.00,5.33);

INSERT INTO `products` (`PRODUCTS_ID`, `PRODUCTS_NAME`, `PRODUCT_CATEGORY`, `PRODUCT_DESCRIPTION`, `UNIT_PRICE`, `BRAND`, `COLOR`, `SIZE`, `STOCK`, `TAX`) VALUES
('1', 'Triangle', 'Percussion', 'Musical Steel Triangle with Striker', '5.50', 'Good Vibrations', 'Grey', 'S', '15', '0.13'),
('2', 'Triangle', 'Percussion', 'Musical Steel Triangle with Striker', '6.45', 'Good Vibrations', 'Grey', 'L', '20', '0.13'),
('3', 'Drum Stick' , 'Percsussion', 'Pair of drum sticks to play drums', '12.00', 'Make Some Noise', 'Brown', 'L', '10', '0.13'),
('4', 'Drums', 'Percussion', 'Drums standard set', '176.00', 'Make Some Noise', 'Black', 'L', '2', '0.23'),
('5', 'Xylophone', 'Percussion', 'Professional Xylophone Wooden Frame Percussion', '50.00', 'Pimpampum', 'Black', 'L', '5', '0.13'),
('6', 'Violin', 'Strings', 'Violin full size 4/4 with solid spruce wood top. Case included', '130.00', 'Cords4All', 'Brown', 'L', '6', '0.13'),
('7', 'Violin', 'Strings', 'Violin with 1/2 size for children with solid spruce wood top. Case included', '130.00', 'Cords4All', 'Brown', 'M', '4', '0.13'),
('8', 'Cavaquinho', 'Strings', 'Soprano Cavaquinho Start Kit', '77.00', 'Cords4All', 'Brown', 'L', '4', '0.13'),
('9', 'Portuguese Guitar', 'Strings', 'Portuguese guitar simple Lisbon model', '286.00', 'Cords4All', 'Brown', 'L', '5', '0.13'),
('10', 'Banjo', 'Strings', '5-String Banjo 24 Bracket with Geared 5th tuner for beginners', '100.00', 'Cords4All', 'White', 'L', '2', '0.13'),
('11', 'Electric Bass Guitar', 'Strings', 'Electric Bass Guitar Full Size 4/4 String', '84.50', 'Cords4All', 'Red', 'L', '2', '0.13'),
('12', 'Electric Guitar', 'Strings', 'Electric Guitar with Gigbag Strap Amp Wire Tremolo Arm Cord for Adult Student Full Size', '47.74', 'Cords4All', 'Blue', 'L', '5', '0.13'),
('13', 'Acoustic Guitar', 'Strings', 'Classical Acoustic Guitar 91 cm Nylon Strings Guitar Beginner Kit', '50.00', 'Cords4All', 'Brown', 'M', '17', '0.13'),
('14', 'Acoustic Guitar', 'Strings', 'Classical Acoustic Guitar 91 cm Nylon Strings Guitar Beginner Kit', '50.00', 'Cords4All', 'Black', 'M', '6', '0.13'),
('15', 'Junior Flute', 'Woodwind', '33 cm small flute for children to play in musical classes', '5.00', 'Blow It', 'Beige', 'S', '60', '0.13'),
('16', 'Transverse Flute', 'Woodwind', 'High Grade Student C Flute Package in Silver Nickel 50cm', '77.00', 'Blow It', 'Silver', 'L', '3', '0.13'),
('17', 'Trumpet', 'Brass', 'Nickel Plated Standard Bb Trumpet 55cm', '99.90', 'Blow It', 'Golden', 'L', '2', '0.13'),
('18', 'Keyboard Piano', 'Keyboard', 'Key Portable Keyboard with Built In Speakers, Headphones, Microphone, Piano Stand, and Stool 150cm', '85.00', 'Mozart Sounds', 'Black', 'L', '2', '0.13'),
('19', 'Clarinet', 'Woodwind', 'Clarinet 40cm Bb Flat 17 Nickel Keys Clarinet with 2 Barrels, Case and Stand', '100.00', 'Blow It', 'Black', 'L', '2', '0.13'),
('20', 'Cornet', 'Brass', 'Bb Flat Silver 34cm Nickel Cornet With Free Hard Case Mouthpiece', '140.00', 'Blow It', 'Silver', 'L', '3', '0.13');

INSERT INTO `sales-products` (`PRODUCTS_ID`, `SALES_ID`, `QUANTITY`, `SUBTOTAL`, `TAX`, `TOTAL`) VALUES
('1', '1', '2', '11.00', '1.43', '12.43'),
('19', '2', '3', '300.00', '39.00', '339.00'),
('20', '2', '1', '140.00', '18.20', '158.20'),
('9', '3', '2', '572.00', '74.36', '646.36'),
('3', '4', '3', '36.00', '4.68', '40.68'),
('4', '4', '1', '176.00', '22.88', '198.88'),
('13', '5', '2', '100.00', '13.00', '113.00'),
('15', '6', '8', '40.00', '5.12', '45.12'),
('17', '7', '1', '99.90', '12.99', '112.89'),
('7', '8', '3', '390.00', '50.70', '440.70'),
('5', '9', '1', '50.00', '6.50', '56.50'),
('13', '10', '1', '50.00', '6.50', '56.50'),
('11', '11', '1', '84.50', '10.99', '95.49'),
('2', '12', '3', '19.35', '2.52', '21.87'),
('10', '13', '2', '200.00', '26.00', '226.00'),
('6', '14', '1', '130.00', '16.90', '146.90'),
('18', '15', '1', '85.00', '11.05', '96.05'),
('15', '15', '2', '10', '1.30', '11.30'),
('8', '16', '1', '77.00', '10.01', '87.01'),
('9', '17', '2', '572.00', '74.36', '646.36'),
('14', '18', '4', '200.00', '26.00', '226.00'),
('16', '19', '1', '77.00', '10.01', '87.01'),
('4', '20', '1', '176.00', '22.88', '198.88'),
('17', '20', '1', '99.90', '12.99', '112.89'),
('13', '21', '6', '300.00', '39.00', '339.00'),
('12', '22', '1', '47.74', '6.21', '53.95'),
('18', '23', '1', '85.00', '11.05', '96.05'),
('1', '24', '1', '5.50', '0.72', '6.22'),
('2', '24', '2', '12.90', '1.68', '14.58'),
('5', '25', '1', '50.00', '6.50', '56.50'),
('20', '26', '1', '140.00', '18.20', '158.20'),
('11', '27', '1', '84.50', '10.99', '95.49'),
('15', '28', '10', '50.00', '6.50', '56.50'),
('8', '29', '1', '77.00', '10.01', '87.01'),
('3', '30', '3', '36.00', '4.68', '40.68'),
('15', '30', '1', '5.00', '0.65', '5.65');

INSERT INTO `rating` (`RATING`, `DATE`, `SALES_ID`) VALUES
(3, '2019-12-30', 1),
(5, '2020-01-03', 6),
(4, '2020-01-06', 8),
(4, '2020-01-10', 10),
(5, '2020-01-15', 16),
(3, '2020-01-17', 17),
(1, '2020-01-18', 19),
(2, '2020-01-20', 20),
(5, '2020-01-22', 22),
(4, '2020-01-25', 25);